#--*-coding:utf-8-*--

class ShinkuuGakuen < DiceBot
  
  def initialize
    super
    
    # @isPrintMaxDice = false;      #æœ€å¤§å€¤è¡¨ç¤º
    # @upplerRollThreshold = 0;      #ä¸Šæ–¹ç„¡é™
    # @unlimitedRollDiceType = 0;    #ç„¡é™ãƒ­ãƒ¼ãƒ«ã®ãƒ€ã‚¤ã‚¹
    # @rerollNumber = 0;      #æŒ¯ã‚Šè¶³ã—ã™ã‚‹æ¡ä»¶
  end
  
  def gameName
    'çœŸç©ºå­¦åœ’'
  end
  
  def gameType
    "ShinkuuGakuen"
  end
  
  def prefixs
    ['CRL', 'CSW', 'CLS', 'CSS', 'CSP', 'CAX', 'CCL', 'CMA', 'CBX', 'CPR', 'CST',
     'RL', 'SW', 'LS', 'SS', 'SP', 'AX', 'CL', 'BW', 'MA', 'BX', 'PR', 'ST']
     
  end
  
  def getHelpMessage
    return <<MESSAGETEXT
ãƒ»åˆ¤å®š
RLxï¼šæŠ€èƒ½ãƒ™ãƒ¼ã‚¹ï½˜ã§æŠ€èƒ½ãƒã‚§ãƒƒã‚¯ã®ãƒ€ã‚¤ã‚¹ãƒ­ãƒ¼ãƒ«
RLx>=yï¼šã“ã®æ›¸å¼ãªã‚‰ç›®æ¨™å€¤ ï½™ ã§åˆ¤å®šçµæœå‡ºåŠ›
ã€€ä¾‹ï¼‰RL10ã€€ã€€RL22>=50

ãƒ»æ­¦å™¨æ”»æ’ƒ
ï¼ˆæ­¦å™¨è¨˜å·ï¼‰ï¼ˆæŠ€èƒ½ãƒ™ãƒ¼ã‚¹å€¤ï¼‰
ã€€ä¾‹ï¼‰SW10ã€€BX30
æ­¦å™¨ã‚’æŠ€èƒ½ãƒ™ãƒ¼ã‚¹ã§ãƒ€ã‚¤ã‚¹ãƒ­ãƒ¼ãƒ«ã€‚æŠ€ç™ºå‹•ã¾ã§ãƒã‚§ãƒƒã‚¯ã€‚
æ­¦å™¨è¨˜å·ã¯ä»¥ä¸‹ã®é€šã‚Š
ã€€SWï¼šå‰£ã€LSï¼šå¤§å‰£ã€SSï¼šå°å‰£ã€SPï¼šæ§ã€
ã€€AXï¼šæ–§ã€CLï¼šæ£æ£’ã€BWï¼šå¼“ã€MAï¼šä½“è¡“ã€
ã€€BXï¼šãƒœã‚¯ã‚·ãƒ³ã‚°ã€PRï¼šãƒ—ãƒ­ãƒ¬ã‚¹ã€STï¼šå¹½æ³¢ç´‹

ãƒ»ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼æ”»æ’ƒ
ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼æŠ€ã¯æ­¦å™¨è¨˜å·ã®é ­ã«ã€ŒCã€ã‚’ã¤ã‘ã‚‹ã¨ãƒ­ãƒ¼ãƒ«å¯èƒ½ã€‚
ã€€ä¾‹ï¼‰CSW10ã€€CBX76
MESSAGETEXT
  end
  
  def dice_command(string, name)
    debug('dice_command string', string)
    
    secret_flg = false
    
    prefixsRegText = prefixs.join('|')
    
    unless ( /(^|\s)(S)?(#{prefixsRegText})([\d\+\-]*)(>=(\d+))?/i =~ string )
      debug("NOT match")
      return '1', secret_flg
    end
    
    debug("matched.")
    
    secretMarker = $2
    waponCommand = $3
    base = $4.to_i
    diff = $6
    
    waponInfo = getWaponTable(waponCommand)
    output_msg = rollJudge(base, diff, waponInfo)
    
    debug('secretMarker', secretMarker)
    if( secretMarker )
      debug("éš ã—ãƒ­ãƒ¼ãƒ«")
      secret_flg = true unless( output_msg.empty? )
    end
    
    unless( output_msg.empty? )
      output_msg = "#{name}: #{output_msg}"
      debug("rating output_msg, secret_flg", output_msg, secret_flg)
    else
      output_msg = '1'
    end
      
    return output_msg, secret_flg
  end
  
  def rollJudge(base, diff, waponInfo)
    debug("rollJudge base", base)
    debug("rollJudge diff", diff)
    
    waponName = waponInfo[:name]
    waponTable = waponInfo[:table]
    
    diceList = getJudgeDiceList
    total = diceList.inject(){|value, i| value += i}
    allTotal = total + base
    
    diffText = if diff.nil? then "" else ">=#{diff}" end
    result = "(#{waponName}ï¼š#{base}#{diffText}) ï¼ 1D100+#{base} ï¼ #{total}"
    result += "[#{diceList.join(',')}]" if( diceList.length >= 2 )
    result += "+#{base}"
    result += " ï¼ #{allTotal}"
    result += getSuccessText(allTotal, diff, diceList, waponTable)
    result += getWaponSkillText(waponTable, diceList.max)
    
    debug("check_1D100 result", result)
    
    return result
  end
  
  def getJudgeDiceList
    diceList = []
    while( true )
      value, dummy = roll(1, 100)
      diceList << value
      
      rank01 = value % 10
      debug("rank01", rank01)
      
      break unless( rank01 == 0 )
    end
    
    return diceList
  end
  
  def getSuccessText(allTotal, diff, diceList, isWapon)
    first = diceList.first
    return '' if( first.nil? ) 
    
    return " ï¼ ãƒ•ã‚¡ãƒ³ãƒ–ãƒ«" if( first <= 9 )
    
    if( diff.nil? and (first != 10) )
      return ''
    end
    
    result = ''
    skillText = getSkillText(first, diff, isWapon)
    result += skillText
    
    unless( diff.nil? )
      result += ' ï¼ ' if( skillText.empty? )
      
      success = (allTotal >= diff.to_i ? "æˆåŠŸ" : "å¤±æ•—")
      result += "#{success}"
    end
    
    return result
  end
  
  def getSkillText(first, diff, isWapon)
    result = ''
    return result if( isWapon )
    
    result = ' ï¼ '
    return result unless( first == 10 )
    
    
    result += "æŠ€èƒ½ãªã—ï¼šãƒ•ã‚¡ãƒ³ãƒ–ãƒ«"
    
    return result if( diff.nil? ) 
    
    result += "ï¼æŠ€èƒ½ã‚ã‚Šï¼š"
    
    return result\
  end
  
  
  def getWaponTable(waponCommand)
    debug('getWaponTable waponCommand', waponCommand)
    
    case waponCommand.upcase
    when 'SW'
      return getWaponTableSword
    when 'CSW'
      return getWaponTableSwordCounter
    when 'LS'
      return getWaponTableLongSword
    when 'CLS'
      return getWaponTableLongSwordCounter
    when 'SS'
      return getWaponTableShortSword
    when 'CSS'
      return getWaponTableShortSwordCounter
    when 'SP'
      return getWaponTableSpear
    when 'CSP'
      return getWaponTableSpearCounter
    when 'AX'
      return getWaponTableAx
    when 'CAX'
      return getWaponTableAxCounter
    when 'CL'
      return getWaponTableClub
    when 'CCL'
      return getWaponTableClubCounter
    when 'BW'
      return getWaponTableBow
    when 'MA'
      return getWaponTableMartialArt
    when 'CMA'
      return getWaponTableMartialArtCounter
    when 'BX'
      return getWaponTableBoxing
    when 'CBX'
      return getWaponTableBoxingCounter
    when 'PR'
      return getWaponTableProWrestling
    when 'CPR'
      return getWaponTableProWrestlingCounter
    when 'ST'
      return getWaponTableStand
    when 'CST'
      return getWaponTableStandCounter
    end
    
    return {:name => 'åˆ¤å®š', :table => nil}
  end
  
  def getWaponTableSword
    {:name => 'å‰£',
      :table =>
      [[11, 'å¤±ç¤¼å‰£', 'æˆåŠŸåº¦ï¼‹ï¼•'],
       [22, 'éš¼æ–¬ã‚Š', 'å›é¿ä¸å¯'],
       [33, 'ã¿ã˜ã‚“æ–¬ã‚Š', 'æ”»æ’ƒé‡ï¼’å€'],
       [44, 'å¤©åœ°äºŒæ®µ', 'ï¼’é€£ç¶šæ”»æ’ƒ'],
       [55, 'æ³¢å‹•å‰£', 'ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ä¸å¯ã€ï¼¢ãƒ»ï¼¤'],
       [66, 'ç–¾é¢¨å‰£', 'æ”»æ’ƒé‡ï¼“å€ï½¤ç›¾å—ã‘æ‡¼øï½²ï¼‘ï¼ï¼'],
       [77, 'æ®‹åƒå‰£', 'å…¨ä½“æ”»æ’ƒã€ï¼¢ãƒ»ï¼¤'],
       [88, 'äº”æœˆé›¨æ–¬ã‚Šã€', 'å›é¿ä¸å¯ï¼ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼“å€'],
       [99, 'ãƒ©ã‚¤ã‚¸ãƒ³ã‚°ãƒãƒ´ã‚¢ã€', 'ï¼’é€£ç¶šæ”»æ’ƒãƒ»ï¼’æ’ƒç›®æ•µç„¡é˜²å‚™ã€ï¼¢ãƒ»ï¼¤'],
       [00, 'å…‰é€Ÿå‰£', 'æ”»æ’ƒé‡3å€ï½¤ç›¾å—ã‘ä¸å¯ï½¤ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ä¸å¯ã€ï¼¢ãƒ»ï¼¤'],
      ]}
  end
  
  def getWaponTableSwordCounter
    {:name => 'å‰£ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼',
      :table =>
      [[33, 'ãƒ‘ãƒªã‚£', 'æ”»æ’ƒã®ç„¡åŠ¹åŒ–'],
       [44, nil, nil],
       [55, nil, nil],
       [66, 'ã‹ã™ã¿é’çœ¼', 'ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼'],
       [77, nil, nil],
       [88, nil, nil],
       [99, nil, nil],
       [00, 'ä¸å‹•å‰£', 'ã‚¯ãƒ­ã‚¹ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã€ï¼¢ãƒ»ï¼¤ã€ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼’å€'],
      ]}
  end
  
  def getWaponTableLongSword
    {:name => 'å¤§å‰£',
      :table => 
      [[11, 'ã‚¹ãƒãƒƒã‚·ãƒ¥', 'æ•µé˜²å¾¡åŠåˆ†'],
       [22, 'å³°æ‰“ã¡', 'éº»ç—ºç¡¬åŒ–ã€Œæ ¹æ€§ã€ï¼'],
       [33, 'æ°´é³¥å‰£', 'æ•µé˜²å¾¡åˆ¤å®šãƒ¼ï¼•ï¼'],
       [44, 'ãƒ–ãƒ«ã‚¯ãƒ©ãƒƒã‚·ãƒ¥', 'æ•µé˜²å¾¡åŠ›ç„¡è¦–'],
       [55, 'é€†é¢¨ã®å¤ªåˆ€', 'ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ä¸å¯ã€ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼’å€'],
       [66, 'æ¿æµå‰£', 'å›é¿ä¸å¯ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ä¸å¯ã€ï¼¢ãƒ»ï¼¤'],
       [77, 'æ¸…æµå‰£', 'å›é¿ä¸å¯ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ä¸å¯ã€ï¼¢ãƒ»ï¼¤'],
       [88, 'ç‡•è¿”ã—', 'ï¼’é€£ç¶šæ”»æ’ƒãƒ»ï¼’æ’ƒç›®ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ä¸å¯ã€ï¼¢ãƒ»ï¼¤'],
       [99, 'åœ°ãšã‚Šæ®‹æœˆ', 'ç›¾å—ã‘ä¸å¯ã€ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼“å€ã€ï¼¢ãƒ»ï¼¤'],
       [00, 'ä¹±ã‚Œé›ªæœˆèŠ±', 'ï¼“é€£ç¶šæ”»æ’ƒãƒ»ä¸‰æ’ƒç›®æ•µç„¡é˜²å‚™ã€ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼“å€ã€é˜²å¾¡åŠ›ç„¡è¦–ã€ï¼¢ãƒ»ï¼¤'],
      ]}
  end

  def getWaponTableLongSwordCounter
    {:name => 'å¤§å‰£ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼',
      :table => 
      [[22, 'ç„¡å½¢ã®ä½', 'æ”»æ’ƒã®ç„¡åŠ¹åŒ–'],
       [33, nil, nil],
       [44, nil, nil],
       [55, 'åŒç ´', 'ã‚¯ãƒ­ã‚¹ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã€ï¼¢ãƒ»ï¼¤'],
       [66, nil, nil],
       [77, nil, nil],
       [88, 'å–ªå¿ƒç„¡æƒ³', 'ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã€æ”»æ’ƒé‡ï¼–å€'],
       [99, nil, nil],
       [00, nil, nil],
      ]}
  end

  def getWaponTableShortSword
    {:name => 'å°å‰£',
      :table => 
      [[11, 'ä¹±ã‚Œçªã', 'ï¼’é€£ç¶šæ”»æ’ƒ'],
       [22, 'ãƒ•ã‚§ã‚¤ã‚¯ã‚¿ãƒ³ã‚°', 'ã‚¹ã‚¿ãƒ³åŠ¹æœã€Œæ³¨æ„åŠ›ã€ï¼•'],
       [33, 'ãƒã‚¤ãƒ³ãƒ‰ã‚¹ãƒ†ã‚¢', 'éº»ç—ºåŠ¹æœã€Œæ³¨æ„åŠ›ã€ï¼'],
       [44, 'ã‚µã‚¤ãƒ‰ãƒ¯ã‚¤ãƒ³ãƒ€ãƒ¼', 'æˆåŠŸåº¦ï¼‹ï¼“ã€ç›¾å—ã‘ä¸å¯'],
       [55, 'ã‚¹ã‚¯ãƒªãƒ¥ãƒ¼ãƒ‰ãƒ©ã‚¤ãƒãƒ¼', 'é˜²å¾¡åŠ›ç„¡è¦–ã€ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼’å€'],
       [66, 'ãƒ‹ãƒ¼ãƒ‰ãƒ«ãƒ­ãƒ³ãƒ‰', 'ï¼“é€£ç¶šæ”»æ’ƒ'],
       [77, 'ãƒ—ãƒ©ã‚ºãƒãƒ–ãƒ©ã‚¹ãƒˆ', 'éº»ç—ºåŠ¹æœã€Œæ ¹æ€§ã€ï¼ã€ï¼¢ãƒ»ï¼¤'],
       [88, 'ã‚µã‚¶ãƒ³ã‚¯ãƒ­ã‚¹', 'éº»ç—ºåŠ¹æœã€Œæ ¹æ€§ã€ï¼•ã€æ”»æ’ƒé‡ï¼’å€'],
       [99, 'ãƒ•ã‚¡ã‚¤ãƒŠãƒ«ãƒ¬ã‚¿ãƒ¼', 'æ°—çµ¶åŠ¹æœã€Œæ ¹æ€§ã€ï¼ã€å›é¿ä¸å¯ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ä¸å¯ã€ï¼¢ãƒ»ï¼¤'],
       [00, 'ç™¾èŠ±ç¹šä¹±', 'å›é¿ä¸å¯ã€ç›¾å—ã‘ä¸å¯ã€æ”»æ’ƒé‡ï¼“å€ã€ï¼¢ãƒ»ï¼¤'],
      ]}
  end
  
  def getWaponTableShortSwordCounter
    {:name => 'å°å‰£ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼',
      :table => 
      [[11, 'ãƒªãƒã‚¹ãƒˆ', 'ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼'],
       [22, nil, nil],
       [33, nil, nil],
       [44, nil, nil],
       [55, nil, nil],
       [66, nil, nil],
       [77, nil, nil],
       [88, 'ãƒã‚¿ãƒ‰ãƒ¼ãƒ«', 'ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã€éº»ç—ºåŠ¹æœã€Œæ³¨æ„åŠ›ã€ï¼•'],
       [99, nil, nil],
       [00, 'ãƒãƒªã‚ªãƒãƒƒãƒˆ', 'æ”»æ’ƒã®ç›¸æ‰‹ã‚’å¤‰ãˆã‚‹'],
      ]}
  end

  def getWaponTableSpear
    {:name => 'æ§',
      :table =>
      [[11, 'ãƒãƒ£ãƒ¼ã‚¸', 'ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼‘ï¼ï¼•å€ã€ç›¾å—ã‘ãƒ¼ï¼“ï¼'],
       [22, 'ç¨²å¦»çªã', 'å›é¿ä¸å¯'],
       [33, 'è„³å‰Šã‚Š', 'éº»ç—ºåŠ¹æœã€Œæ ¹æ€§ã€ï¼'],
       [44, 'å¤§è»Šè¼ª', 'å…¨ä½“æ”»æ’ƒ'],
       [55, 'ç‹‚ä¹±æ’ƒ', 'äºŒå›æ”»æ’ƒ'],
       [66, 'ã‚¹ãƒ‘ã‚¤ãƒ©ãƒ«ãƒãƒ£ãƒ¼ã‚¸', 'ç›¾å—ã‘ä¸å¯ã€ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼’å€ã€ï¼¢ãƒ»ï¼¤'],
       [77, 'åŒé¾æ³¢', 'ã‚¹ã‚¿ãƒ³åŠ¹æœã€Œæ³¨æ„åŠ›ã€ï¼•ã€ç›¾å—ã‘ä¸å¯ã€ï¼¢ãƒ»ï¼¤'],
       [88, 'æµæ˜Ÿè¡', 'ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ä¸å¯ã€ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼“å€ã€æ¬¡è¡Œå‹•ã¾ã§æ”»æ’ƒå¯¾è±¡ã«ãªã‚‰ãªã„'],
       [99, 'ãƒ©ãƒ³ãƒ‰ã‚¹ãƒ©ã‚¤ã‚µãƒ¼', 'å…¨ä½“æ”»æ’ƒã€å›é¿ä¸å¯ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ä¸å¯ã€ï¼¢ãƒ»ï¼¤'],
       [00, 'ç„¡åŒä¸‰æ®µ', 'ä¸‰æ®µæ”»æ’ƒã€äºŒæ®µç›®ï¼¢ãƒ»ï¼¤ã€ä¸‰æ®µç›®ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼’å€ã€ï¼¢ãƒ»ï¼¤'],
      ]}
  end
  
  def getWaponTableSpearCounter
    {:name => 'æ§ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼',
      :table =>
      [[55, 'é¢¨è»Š', 'ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã€ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼’å€'],
       [66, nil, nil],
       [77, nil, nil],
       [88, nil, nil],
       [99, nil, nil],
       [00, nil, nil],
      ]}
  end
  
  def getWaponTableAx
    {:name => 'æ–§',
      :table => 
      [[11, 'ä¸€äººæ™‚é–“å·®', 'é˜²å¾¡è¡Œå‹•ãƒ¼ï¼‘ï¼ï¼'],
       [22, 'ãƒˆãƒãƒ›ãƒ¼ã‚¯', 'ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ä¸å¯'],
       [33, 'å¤§æœ¨æ–­', 'ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼’å€'],
       [44, 'ãƒ–ãƒ¬ãƒ¼ãƒ‰ãƒ­ãƒ¼ãƒ«', 'å…¨ä½“æ”»æ’ƒ'],
       [55, 'ãƒã‚­å‰²ã‚Šã‚¹ãƒšã‚·ãƒ£ãƒ«', 'ç›¾å—ã‘ä¸å¯ã€ï¼¢ãƒ»ï¼¤'],
       [66, 'ãƒ¨ãƒ¼ãƒ¨ãƒ¼', 'ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ä¸å¯ã€ï¼’é€£ç¶šæ”»æ’ƒ'],
       [77, 'ãƒ¡ã‚¬ãƒ›ãƒ¼ã‚¯', 'ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ä¸å¯ã€å…¨ä½“æ”»æ’ƒã€æ”»æ’ƒé‡ï¼’å€'],
       [88, 'ãƒ‡ãƒƒãƒ‰ãƒªãƒ¼ã‚¹ãƒ”ãƒ³', 'å›é¿ä¸å¯ã€æ”»æ’ƒé‡ï¼•å€'],
       [99, 'ãƒã‚­å‰²ã‚Šãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯', 'ç›¾å—ã‘ä¸å¯ã€ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼’å€ã€ï¼¢ãƒ»ï¼¤ã€ã‚¿ãƒ¼ãƒ³ã®æœ€å¾Œã«å‘½ä¸­'],
       [00, 'é«˜é€ŸãƒŠãƒ–ãƒ©', 'å›é¿ä¸å¯ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ä¸å¯ã€æ”»æ’ƒé‡ï¼“å€ã€ï¼¢ãƒ»ï¼¤'],
      ]}
  end
  
  def getWaponTableAxCounter
    {:name => 'æ–§ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼',
      :table => 
      [[44, 'çœŸã£å‘å”ç«¹å‰²ã‚Š', 'ã‚¯ãƒ­ã‚¹ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã€ï¼¢ãƒ»ï¼¤'],
       [55, nil, nil],
       [66, nil, nil],
       [77, nil, nil],
       [88, nil, nil],
       [99, nil, nil],
       [00, nil, nil],
      ]}
  end
  
  def getWaponTableClub
    {:name =>'æ£æ£’',
      :table => 
      [[11, 'ãƒãƒ¼ãƒ‰ãƒ’ãƒƒãƒˆ', 'é˜²å¾¡åŠ›ç„¡è¦–'],
       [22, 'ãƒ€ãƒ–ãƒ«ãƒ’ãƒƒãƒˆ', 'ï¼’é€£ç¶šæ”»æ’ƒ'],
       [33, 'å›è»¢æ’ƒ', 'é˜²å¾¡åˆ¤å®šãƒ¼ï¼‘ï¼ï¼'],
       [44, 'é£›ç¿”è„³å¤©æ’ƒ', 'éº»ç—ºåŠ¹æœã€Œæ ¹æ€§ã€ï¼•'],
       [55, 'å‰Šå²©æ’ƒ', 'ç›¾å—ã‘ä¸å¯ã€æ”»æ’ƒé‡ï¼“å€'],
       [66, 'åœ°è£‚æ’ƒ', 'é˜²å¾¡åŠ›ç„¡è¦–ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ä¸å¯ã€ç›¾å—ã‘ä¸å¯ã€ã‚¹ã‚¿ãƒ³åŠ¹æœã€Œæ³¨æ„åŠ›ã€ï¼'],
       [77, 'ãƒˆãƒªãƒ—ãƒ«ãƒ’ãƒƒãƒˆ', 'ï¼“é€£ç¶šæ”»æ’ƒ'],
       [88, 'äº€ç”²ç¾…å‰²ã‚Š', 'é˜²å¾¡åŠ›åŠåˆ†ã€ç›¾å—ã‘ä¸å¯ã€ï¼¢ãƒ»ï¼¤'],
       [99, 'å©ãã¤ã¶ã™', 'é˜²å¾¡åŠ›ç„¡è¦–ã€é˜²å¾¡è¡Œå‹•ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ä¸å¯ã€ï¼¢ãƒ»ï¼¤'],
       [00, 'ã‚°ãƒ©ãƒ³ãƒ‰ã‚¯ãƒ­ã‚¹', 'é˜²å¾¡ç„¡è¦–ã€ç›¾ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ä¸å¯ã€ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼’å€ã€ï¼¢ãƒ»ï¼¤ã€å…¨ä½“æ”»æ’ƒ'],
      ]}
  end
  
  def getWaponTableClubCounter
    {:name =>'æ£æ£’ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼',
      :table => 
      [[11, 'ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°', 'æ”»æ’ƒã®ç„¡åŠ¹åŒ–'],
       [22, nil, nil],
       [33, nil, nil],
       [44, nil, nil],
       [55, nil, nil],
       [66, 'ã‚¸ãƒ£ã‚¹ãƒˆãƒŸãƒ¼ãƒˆ', 'é£›ã³é“å…·ã®ã¿ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼'],
       [77, nil, nil],
       [88, nil, nil],
       [99, 'ãƒ›ãƒ¼ãƒ ãƒ©ãƒ³', 'ã™ã¹ã¦ã®æ”»æ’ƒã«å¯¾ã™ã‚‹ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼'],
       [00, nil, nil],
      ]}
  end
  
  def getWaponTableBow
    {:name => 'å¼“',
      :table => 
      [[11, 'å½±ç¸«ã„', 'éº»ç—ºåŠ¹æœã€Œæ³¨æ„åŠ›ã€ï¼'],
       [22, 'ã‚¢ãƒ­ãƒ¼ãƒ¬ã‚¤ãƒ³', 'å…¨ä½“æ”»æ’ƒãƒ»å›é¿ãƒ¼ï¼•ï¼'],
       [33, 'é€Ÿå°„', 'ï¼’é€£ç¶šæ”»æ’ƒ'],
       [44, 'ç¬é€Ÿã®çŸ¢', 'é˜²å¾¡ä¸å¯'],
       [55, 'ãƒãƒ©ãƒ¼ã‚¸ã‚·ãƒ¥ãƒ¼ãƒˆ', 'å…¨ä½“æ”»æ’ƒãƒ»ç›¾å—ã‘ä¸å¯ãƒ»æ”»æ’ƒé‡ï¼’å€'],
       [66, 'è²«ãã®çŸ¢', 'é˜²å¾¡åŠ›ç„¡è¦–ã€ï¼¢ãƒ»ï¼¤'],
       [77, 'è½é³³æ³¢', 'å›é¿ä¸å¯ã€ï¼¢ãƒ»ï¼¤'],
       [88, 'çš†æ­»ã­çŸ¢', 'å…¨ä½“æ”»æ’ƒã€æ°—çµ¶åŠ¹æœã€Œæ ¹æ€§ã€ï¼•'],
       [99, 'ãƒŸãƒªã‚ªãƒ³ãƒ€ãƒ©ãƒ¼', 'ä¸‰é€£ç¶šæ”»æ’ƒ'],
       [00, 'å¤¢æƒ³å¼“', 'ï¼¢ãƒ»ï¼¤ã€ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼“å€'],
      ]}
  end
  
  def getWaponTableMartialArt
    {:name => 'ä½“è¡“',
      :table =>
      [[11, 'é›†æ°—æ³•', 'é€šå¸¸ãƒ€ãƒ¡ãƒ¼ã‚¸åˆ†è‡ªåˆ†ã®ï¼¨ï¼°å›å¾©'],
       [22, 'ã‚³ãƒ³ãƒ“ãƒãƒ¼ã‚·ãƒ§ãƒ³', 'ï¼’é€£ç¶šæ”»æ’ƒ'],
       [33, 'é€†ä¸€æœ¬', 'ç›¾å—ã‘ä¸å¯ã€é˜²å¾¡åŠ›åŠåˆ†ã€ã‚¹ã‚¿ãƒ³åŠ¹æœã€Œæ ¹æ€§ã€ï¼'],
       [44, 'ã‚³ãƒ¼ã‚¯ã‚¹ã‚¯ãƒªãƒ¥ãƒ¼ãƒ–ãƒ­ãƒ¼', 'é˜²å¾¡åŠ›ç„¡è¦–ã€ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼“å€'],
       [55, 'ç·´æ°—æ‹³', 'å…¨ä½“æ”»æ’ƒãƒ»å›é¿ä¸å¯'],
       [66, 'ãƒãƒ™ãƒ«ã‚¯ãƒ©ãƒ³ãƒ—ãƒ«', 'ç›¾å—ã‘ä¸å¯ã€ï¼¢ãƒ»ï¼¤'],
       [77, 'ãƒã‚·ãƒ³ã‚¬ãƒ³ã‚¸ãƒ£ãƒ–', 'ï¼“é€£ç¶šæ”»æ’ƒ'],
       [88, 'ãƒŠã‚¤ã‚¢ã‚¬ãƒ©ãƒ•ã‚©ãƒ¼ãƒ«', 'ç›¾å—ã‘ä¸å¯ã€ï¼¢ãƒ»ï¼¤ã€ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼’å€'],
       [99, 'ç¾…åˆ¹æŒ', 'é˜²å¾¡åŠ›ç„¡è¦–ã€é˜²å¾¡ä¸å¯ã€ï¼¢ãƒ»ï¼¤ã€ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼“å€'],
       [00, 'åƒæ‰‹è¦³éŸ³', 'ï¼•é€£ç¶šæ”»æ’ƒã€ã™ã¹ã¦ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ä¸å¯'],
      ]}
  end
  
  def getWaponTableMartialArtCounter
    {:name => 'ä½“è¡“ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼',
      :table =>
      [[11, 'ã‚¹ã‚¦ã‚§ã‚¤ãƒãƒƒã‚¯', 'æ”»æ’ƒã®ç„¡åŠ¹åŒ–'],
       [22, nil, nil],
       [33, 'å½“ã¦èº«æŠ•ã’', 'ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼'],
       [44, nil, nil],
       [55, nil, nil],
       [66, 'ã‚¸ãƒ§ãƒ«ãƒˆã‚«ã‚¦ãƒ³ã‚¿ãƒ¼', 'ã‚¯ãƒ­ã‚¹ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã€ï¼¢ãƒ»ï¼¤'],
       [77, nil, nil],
       [88, nil, nil],
       [99, 'ã‚¬ãƒ¼ãƒ‰ã‚­ãƒ£ãƒ³ã‚»ãƒ«', 'ï¼¤ï¼‘ï¼ã§æŒ¯ã£ãŸå¿…æ®ºæŠ€ã«ã‚ˆã‚‹ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼' + getRandMartialArtCounter],
       [00, nil, nil],
      ]}
  end
  
  def getRandMartialArtCounter
    value, dummy = roll(1, 10)
    dice = value * 10 + value
    dice = 100 if( value == 110 )
    
    tableInfo = getWaponTableMartialArt
    waponTable = tableInfo[:table]
    
    result = " ï¼ (#{value})"
    result += getWaponSkillText(waponTable, dice)
    
    return result
  end
  
  def getWaponTableBoxing
    {:name => 'ãƒœã‚¯ã‚·ãƒ³ã‚°',
      :table =>
      [[11, 'ãƒ¯ãƒ³ãƒ»ãƒ„ãƒ¼', 'ï¼’é€£ç¶šæ”»æ’ƒãƒ»ï¼’æ”»æ’ƒç›®ç›¾å—ã‘ã€å›é¿ä¸å¯'],
       [22, 'ãƒªãƒãƒ¼ãƒ–ãƒ­ãƒ¼', 'éº»ç—ºåŠ¹æœã€Œæ ¹æ€§ã€ï¼•'],
       [33, 'ãƒ•ãƒªãƒƒã‚«ãƒ¼', 'ï¼’é€£ç¶šæ”»æ’ƒãƒ»å…¨ã¦ç›¾å—ã‘ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ä¸å¯'],
       [44, 'ã‚³ãƒ¼ã‚¯ã‚¹ã‚¯ãƒªãƒ¥ãƒ¼ãƒ–ãƒ­ãƒ¼', 'é˜²å¾¡åŠ›ç„¡è¦–ã€ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼“å€'],
       [55, 'ãƒ¬ã‚¤ãƒ»ã‚¬ãƒ³', 'å…¨ä½“æ”»æ’ƒã€ï¼¢ãƒ»ï¼¤ã€é™½å±æ€§é­”æ³•æ”»æ’ƒ'],
       [66, 'ã‚·ãƒ§ãƒƒãƒˆã‚¬ãƒ³ãƒ–ãƒ­ãƒ¼', 'æ”»æ’ƒé‡ï¼‘ï¼å€'],
       [77, 'ãƒãƒ¼ãƒˆãƒ–ãƒ¬ã‚¤ã‚¯ã‚·ãƒ§ãƒƒãƒˆ', 'ï¼’é€£ç¶šæ”»æ’ƒãƒ»ï¼‘æ”»æ’ƒç›®é˜²å¾¡åŠ›ç„¡è¦–ã€ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼“å€ãƒ»ï¼’æ’ƒç›®æ•µç„¡é˜²å‚™'],
       [88, 'ãƒ‡ãƒ³ãƒ—ã‚·ãƒ¼ãƒ­ãƒ¼ãƒ«', 'ï¼“é€£ç¶šæ”»æ’ƒãƒ»å…¨ã¦ï¼¢ãƒ»ï¼¤'],
       [99, 'ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ãƒ”ã‚¹ãƒˆãƒ³ãƒãƒƒãƒãƒ‘ãƒ³ãƒ', 'å…¨ä½“æ”»æ’ƒã€ï¼¢ãƒ»ï¼¤ã€æ°—çµ¶åŠ¹æœã€Œæ ¹æ€§ã€ï¼•'],
       [00, 'å³', 'é˜²å¾¡åŠ›ç„¡è¦–ã€ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼‘ï¼å€'],
      ]}
  end
  
  def getWaponTableBoxingCounter
    {:name => 'ãƒœã‚¯ã‚·ãƒ³ã‚°ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼',
      :table =>
      [[11, 'ãƒ€ãƒƒã‚­ãƒ³ã‚°ãƒ–ãƒ­ãƒ¼', 'ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼'],
       [22, 'ã‚¸ãƒ§ãƒ«ãƒˆã‚«ã‚¦ãƒ³ã‚¿ãƒ¼', 'ã‚¯ãƒ­ã‚¹ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã€ï¼¢ãƒ»ï¼¤'],
       [33, nil, nil],
       [44, nil, nil],
       [55, nil, nil],
       [66, nil, nil],
       [77, nil, nil],
       [88, nil, nil],
       [99, nil, nil],
       [00, 'ãƒãƒ¼ã‚¬ãƒ¼ãƒ‰æˆ¦æ³•', 'æ”»æ’ƒã®ç„¡åŠ¹åŒ–ã€æ¬¡ã‚¿ãƒ¼ãƒ³ä»¥é™ã¯è‡ªåˆ†ã®ç›¾å—ã‘ã€å›é¿ä¸å¯ã€å…¨ã¦ã®æ”»æ’ƒã«ï¼¢ãƒ»ï¼¤'],
      ]}
  end
  
  def getWaponTableProWrestling
    {:name => 'ãƒ—ãƒ­ãƒ¬ã‚¹',
      :table =>
      [[11, 'ãƒœãƒ‡ã‚£ã‚¹ãƒ©ãƒ ', 'ç›¾å—ã‘ä¸å¯'],
       [22, 'ãƒ‰ãƒ­ãƒƒãƒ—ã‚­ãƒƒã‚¯', 'ï¼¢ãƒ»ï¼¤'],
       [33, 'æ°´è»Šè½ã¨ã—', 'ç›¾å—ã‘ä¸å¯ã€æˆåŠŸåº¦ï¼‹ï¼•'],
       [44, 'ãƒŠãƒƒã‚¯ãƒ«ã‚¢ãƒ­ãƒ¼', 'ï¼¢ãƒ»ï¼¤ã€éº»ç—ºåŠ¹æœã€Œæ ¹æ€§ã€ï¼•'],
       [55, 'ãƒ¯ãƒ³ãƒ»ãƒ„ãƒ¼ãƒ»ã‚¨ãƒ«ãƒœãƒ¼', 'ï¼’é€£ç¶šæ”»æ’ƒ'],
       [66, 'ãƒãƒƒã‚¯ãƒ‰ãƒ­ãƒƒãƒ—', 'ç›¾å—ã‘ä¸å¯ã€ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼’å€'],
       [77, 'æŠ•ã’ã£æ”¾ã—ã‚¸ãƒ£ãƒ¼ãƒãƒ³', 'ç›¾å—ã‘ä¸å¯ã€é˜²å¾¡åŠ›ç„¡è¦–ã€æˆåŠŸåº¦ï¼‹ï¼•'],
       [88, 'ãƒ‘ãƒ¯ãƒ¼ãƒœãƒ ', 'ç›¾å—ã‘ä¸å¯ã€ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼’å€ã€ï¼¢ãƒ»ï¼¤'],
       [99, 'ãƒ‡ã‚¹ãƒãƒ¬ãƒ¼ãƒœãƒ ', 'ç›¾å—ã‘ä¸å¯ã€é˜²å¾¡åŠ›ç„¡è¦–ã€ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼’å€ã€æ°—çµ¶åŠ¹æœã€Œæ ¹æ€§ã€ï¼•'],
       [00, 'ã‚¸ãƒ£ãƒƒã‚¯ãƒãƒãƒ¼', 'ç›¾å—ã‘ä¸å¯ã€é˜²å¾¡åŠ›ç„¡è¦–ã€ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼“å€ã€æˆåŠŸåº¦ï¼‹ï¼‘ï¼'],
      ]}
  end
  
  def getWaponTableProWrestlingCounter
    {:name => 'ãƒ—ãƒ­ãƒ¬ã‚¹ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼',
      :table =>
      [[22, 'ãƒ‘ãƒ¯ãƒ¼ã‚¹ãƒ©ãƒ ', 'ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼'],
       [55, 'ã‚¢ãƒƒã‚¯ã‚¹ãƒœãƒ³ãƒãƒ¼', 'ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã€ï¼¢ãƒ»ï¼¤'],
       [66, nil, nil],
       [77, nil, nil],
       [88, nil, nil],
       [99, nil, nil],
       [00, nil, nil],
      ]}
  end
  
  def getWaponTableStand
    {:name => 'å¹½æ³¢ç´‹',
      :table =>
      [[11, 'SILER CHARIOT', 'æ”»æ’ƒé‡ï¼•å€ã€åˆºã—ã‚¿ã‚¤ãƒ—æ”»æ’ƒ'],
       [22, 'TOWER OF GRAY', 'é˜²å¾¡åŠ›ç„¡è¦–'],
       [33, 'DARK BLUE MOON', 'å…¨ä½“æ”»æ’ƒã€æ”»æ’ƒé‡ï¼’å€ã€æ°´å±æ€§æ–¬ã‚Šã‚¿ã‚¤ãƒ—æ”»æ’ƒ'],
       [44, 'EMPEROR', 'å›é¿ä¸å¯ã€ç›¾å—ã‘ä¸å¯ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ä¸å¯ã€é£›ã³é“å…·æ”»æ’ƒ'],
       [55, 'MAGICIAN\'s RED', 'ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼’å€ã€ï¼¢ãƒ»ï¼¤ã€ç«å±æ€§é­”æ³•æ”»æ’ƒ'],
       [66, 'DEATH 13', 'ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼ã€å…¨ä½“æ”»æ’ƒã€æ°—çµ¶åŠ¹æœã€Œæ ¹æ€§ã€ï¼•'],
       [77, 'HIEROPHANT GREEN', 'å…¨ä½“æ”»æ’ƒã€ï¼¢ãƒ»ï¼¤ã€æ°´å±æ€§æ”»æ’ƒ'],
       [88, 'VANILLA ICE CREAM', 'ç›¾å—ã‘ä¸å¯ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ä¸å¯ã€é˜²å¾¡åŠ›ç„¡è¦–ã€ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼“å€ã€ï¼¢ãƒ»ï¼¤'],
       [99, 'THE WORLD', 'ï¼•é€£ç¶šæ”»æ’ƒã€å…¨ã¦æ•µç„¡é˜²å‚™'],
       [00, 'STAR PLATINUM', 'æ”»æ’ƒé‡ï¼‘ï¼•å€ã€ï¼¢ãƒ»ï¼¤'],
      ]}
  end
  
  def getWaponTableStandCounter
    {:name => 'å¹½æ³¢ç´‹ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼',
      :table =>
      [[11, 'ANUBIS', 'æŠ€ã®ã¿ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã€ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼ˆã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã—ãŸå›æ•°ã®ï¼’ä¹—ï¼‰å€ã€æ–¬ã‚Šã‚¿ã‚¤ãƒ—æ”»æ’ƒ'],
       [22, nil, nil],
       [33, nil, nil],
       [44, nil, nil],
       [55, nil, nil],
       [66, 'YELLOW TEMPERANE', 'é­”æ³•ãƒ»é£›ã³é“å…·å«ã‚ã¦å…¨ã¦ã®æ”»æ’ƒã‚’ç„¡åŠ¹åŒ–'],
       [77, nil, nil],
       [88, nil, nil],
       [99, nil, nil],
       [00, nil, nil],
      ]}
  end
  
  def getWaponSkillText(waponTable, dice)
    debug('getWaponSkillText', dice)
    
    return '' if( waponTable.nil? )
    
    preName = ''
    preEffect = ''
    
    waponTable.each do |index, name, effect|
      name ||= preName
      preName = name
      
      effect ||= preEffect
      preEffect = effect
      
      next unless( index == (dice % 100) )
      
      return " ï¼ ã€Œ#{name}ã€#{effect}"
    end
    
    return ''
  end
  
end
